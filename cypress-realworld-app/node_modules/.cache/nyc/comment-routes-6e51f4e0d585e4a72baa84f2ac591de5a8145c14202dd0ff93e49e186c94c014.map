{"version":3,"file":"/Users/alimran/cypress-realworld-app/backend/comment-routes.ts","sources":["/Users/alimran/cypress-realworld-app/backend/comment-routes.ts"],"names":[],"mappings":";AAAA,gCAAgC;;;;;AAEhC,oDAA8B;AAC9B,uCAAwE;AACxE,qCAAoE;AACpE,2CAAqE;AACrE,IAAM,MAAM,GAAG,iBAAO,CAAC,MAAM,EAAE,CAAC;AAEhC,SAAS;AAET,8BAA8B;AAC9B,MAAM,CAAC,GAAG,CACR,iBAAiB,EACjB,6BAAmB,EACnB,IAAA,4BAAkB,EAAC,CAAC,IAAA,8BAAiB,EAAC,eAAe,CAAC,CAAC,CAAC,EACxD,UAAC,GAAG,EAAE,GAAG;IACC,IAAA,aAAa,GAAK,GAAG,CAAC,MAAM,cAAf,CAAgB;IACrC,IAAM,QAAQ,GAAG,IAAA,qCAA0B,EAAC,aAAa,CAAC,CAAC;IAE3D,GAAG,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC;IAChB,GAAG,CAAC,IAAI,CAAC,EAAE,QAAQ,UAAA,EAAE,CAAC,CAAC;AACzB,CAAC,CACF,CAAC;AAEF,+BAA+B;AAC/B,MAAM,CAAC,IAAI,CACT,iBAAiB,EACjB,6BAAmB,EACnB,IAAA,4BAAkB,EAAC,CAAC,IAAA,8BAAiB,EAAC,eAAe,CAAC,EAAE,+BAAkB,CAAC,CAAC,EAC5E,UAAC,GAAG,EAAE,GAAG;;IACC,IAAA,aAAa,GAAK,GAAG,CAAC,MAAM,cAAf,CAAgB;IAC7B,IAAA,OAAO,GAAK,GAAG,CAAC,IAAI,QAAb,CAAc;IAE7B,0BAA0B;IAC1B,IAAA,yBAAc,EAAC,MAAA,GAAG,CAAC,IAAI,0CAAE,EAAG,EAAE,aAAa,EAAE,OAAO,CAAC,CAAC;IAEtD,GAAG,CAAC,UAAU,CAAC,GAAG,CAAC,CAAC;AACtB,CAAC,CACF,CAAC;AAEF,kBAAe,MAAM,CAAC","sourcesContent":["///<reference path=\"types.ts\" />\n\nimport express from \"express\";\nimport { getCommentsByTransactionId, createComments } from \"./database\";\nimport { ensureAuthenticated, validateMiddleware } from \"./helpers\";\nimport { shortIdValidation, isCommentValidator } from \"./validators\";\nconst router = express.Router();\n\n// Routes\n\n//GET /comments/:transactionId\nrouter.get(\n  \"/:transactionId\",\n  ensureAuthenticated,\n  validateMiddleware([shortIdValidation(\"transactionId\")]),\n  (req, res) => {\n    const { transactionId } = req.params;\n    const comments = getCommentsByTransactionId(transactionId);\n\n    res.status(200);\n    res.json({ comments });\n  }\n);\n\n//POST /comments/:transactionId\nrouter.post(\n  \"/:transactionId\",\n  ensureAuthenticated,\n  validateMiddleware([shortIdValidation(\"transactionId\"), isCommentValidator]),\n  (req, res) => {\n    const { transactionId } = req.params;\n    const { content } = req.body;\n\n    /* istanbul ignore next */\n    createComments(req.user?.id!, transactionId, content);\n\n    res.sendStatus(200);\n  }\n);\n\nexport default router;\n"]}